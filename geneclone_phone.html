<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#667eea">
  <title>Gene Clone Phone - EugeneOusOS</title>
  
  <link rel="manifest" href="geneclone_manifest.json">
  <link rel="icon" href="icons/geneclone-icon.png">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
      color: #fff;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
      touch-action: pan-y;
    }

    /* Boot Screen */
    #bootScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      transition: opacity 0.5s ease, transform 0.5s ease;
    }

    #bootScreen.hidden {
      opacity: 0;
      transform: scale(1.2);
      pointer-events: none;
    }

    .boot-logo {
      font-size: 80px;
      margin-bottom: 20px;
      animation: pulse 2s infinite;
    }

    .boot-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 10px;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
    }

    .boot-subtitle {
      font-size: 16px;
      opacity: 0.9;
      margin-bottom: 40px;
    }

    .boot-progress {
      width: 80%;
      max-width: 300px;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .boot-progress-fill {
      height: 100%;
      background: #fff;
      width: 0%;
      animation: bootProgress 2s ease-out forwards;
    }

    @keyframes bootProgress {
      0% { width: 0%; }
      20% { width: 30%; }
      40% { width: 60%; }
      60% { width: 80%; }
      80% { width: 95%; }
      100% { width: 100%; }
    }

    .boot-status {
      font-size: 14px;
      opacity: 0.8;
      font-family: monospace;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.05); opacity: 0.9; }
    }

    /* Home Screen */
    #homeScreen {
      position: relative;
      width: 100%;
      height: 100%;
      display: none;
      flex-direction: column;
    }

    #homeScreen.active {
      display: flex;
    }

    /* Status Bar */
    .status-bar {
      height: 30px;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      padding: 0 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .status-left, .status-right {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    /* App Grid */
    .app-container {
      flex: 1;
      overflow-y: auto;
      padding: 20px 15px;
    }

    .app-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
      gap: 20px;
      max-width: 600px;
      margin: 0 auto;
    }

    .app-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .app-item:active {
      transform: scale(0.95);
    }

    .app-icon {
      width: 70px;
      height: 70px;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.8));
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
    }

    .app-icon::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: rotate(45deg);
    }

    .app-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #ff4444;
      color: #fff;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 700;
      border: 2px solid #0a0a0a;
    }

    .app-name {
      font-size: 12px;
      text-align: center;
      max-width: 80px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Dock */
    .dock {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(20px);
      border-radius: 25px;
      margin: 10px;
      padding: 10px;
      display: flex;
      justify-content: center;
      gap: 15px;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
    }

    .dock .app-icon {
      width: 60px;
      height: 60px;
      font-size: 30px;
    }

    /* App View (Fullscreen) */
    .app-view {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0a0a0a;
      z-index: 9000;
      display: none;
      flex-direction: column;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .app-view.active {
      display: flex;
      transform: translateY(0);
    }

    .app-header {
      height: 50px;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      padding: 0 15px;
      gap: 15px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .app-back-btn {
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .app-back-btn:active {
      transform: scale(0.9);
    }

    .app-title {
      font-size: 18px;
      font-weight: 600;
      flex: 1;
    }

    .app-content {
      flex: 1;
      overflow-y: auto;
      position: relative;
    }

    .app-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* Loading Spinner */
    .spinner {
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Search Bar */
    .search-bar {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 10px 15px;
      margin: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .search-input {
      flex: 1;
      background: none;
      border: none;
      color: #fff;
      font-size: 16px;
      outline: none;
    }

    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.5);
    }

    /* Connection Status */
    .connection-status {
      position: fixed;
      top: 35px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 193, 7, 0.9);
      color: #000;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      display: none;
      z-index: 9999;
    }

    .connection-status.offline {
      background: rgba(244, 67, 54, 0.9);
      color: #fff;
      display: block;
    }

    .connection-status.online {
      background: rgba(76, 175, 80, 0.9);
      color: #fff;
    }

    /* Notification Toast */
    .notification {
      position: fixed;
      top: 40px;
      left: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 15px;
      display: none;
      align-items: center;
      gap: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      z-index: 10001;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .notification.show {
      display: flex;
    }

    .notification-icon {
      font-size: 24px;
    }

    .notification-content {
      flex: 1;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 2px;
    }

    .notification-text {
      font-size: 12px;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <!-- Boot Screen -->
  <div id="bootScreen">
    <div class="boot-logo">üß¨</div>
    <div class="boot-title">Gene Clone Phone</div>
    <div class="boot-subtitle">EugeneOusOS v1.0</div>
    <div class="boot-progress">
      <div class="boot-progress-fill"></div>
    </div>
    <div class="boot-status">Initializing instant architecture...</div>
  </div>

  <!-- Connection Status -->
  <div class="connection-status" id="connectionStatus">Offline Mode</div>

  <!-- Notification Toast -->
  <div class="notification" id="notification">
    <div class="notification-icon">üì±</div>
    <div class="notification-content">
      <div class="notification-title" id="notificationTitle">Welcome!</div>
      <div class="notification-text" id="notificationText">EugeneOusOS is ready</div>
    </div>
  </div>

  <!-- Home Screen -->
  <div id="homeScreen">
    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-left">
        <span id="statusTime">12:00</span>
      </div>
      <div class="status-right">
        <span id="statusSignal">üì∂</span>
        <span id="statusWifi">üì°</span>
        <span id="statusBattery">üîã</span>
      </div>
    </div>

    <!-- Search Bar -->
    <div class="search-bar">
      <span>üîç</span>
      <input type="text" class="search-input" placeholder="Search 10,000+ apps..." id="searchInput">
    </div>

    <!-- App Container -->
    <div class="app-container">
      <div class="app-grid" id="appGrid">
        <!-- Apps will be dynamically loaded here -->
      </div>
    </div>

    <!-- Dock -->
    <div class="dock" id="dock">
      <!-- Dock apps will be loaded here -->
    </div>
  </div>

  <!-- App View (Fullscreen) -->
  <div class="app-view" id="appView">
    <div class="app-header">
      <div class="app-back-btn" onclick="closeApp()">‚Üê</div>
      <div class="app-title" id="appViewTitle">App</div>
    </div>
    <div class="app-content" id="appContent">
      <!-- App content loads here -->
    </div>
  </div>

  <script>
    /**
     * üß¨ Gene Clone Phone - EugeneOusOS
     * Instant Cloud-Based Operating System
     * No downloads, instant access to 100-10,000 apps
     */

    class EugeneOusOS {
      constructor() {
        this.version = '1.0.0';
        this.apps = [];
        this.isOnline = navigator.onLine;
        this.bootTime = Date.now();
        
        console.log('üß¨ Gene Clone Phone - EugeneOusOS Initializing...');
        
        this.init();
      }

      async init() {
        // Boot sequence
        await this.boot();
        
        // Load app registry
        await this.loadAppRegistry();
        
        // Setup UI
        this.setupUI();
        
        // Setup offline support
        this.setupOfflineMode();
        
        // Setup notifications
        this.setupNotifications();
        
        // Update status bar
        this.updateStatusBar();
        setInterval(() => this.updateStatusBar(), 1000);
        
        // Show home screen
        setTimeout(() => {
          document.getElementById('bootScreen').classList.add('hidden');
          document.getElementById('homeScreen').classList.add('active');
          
          this.showNotification('Welcome to Gene Clone Phone!', 'Your device is now turbocharged with EugeneOusOS');
        }, 2500);
      }

      async boot() {
        console.log('‚ö° Booting EugeneOusOS...');
        console.log(`üì± Device: ${navigator.userAgent}`);
        console.log(`üåê Online: ${this.isOnline}`);
        console.log(`üß† Memory: ${navigator.deviceMemory || 'Unknown'} GB`);
        console.log(`üíª Cores: ${navigator.hardwareConcurrency || 'Unknown'}`);
        
        // Simulate boot time (instant in production)
        await new Promise(resolve => setTimeout(resolve, 1000));
      }

      async loadAppRegistry() {
        console.log('üì¶ Loading App Registry...');
        
        // Core PixelProdigy Apps (always available)
        this.apps = [
          // Tier 1: Core Platform
          {
            id: 'business-universe',
            name: 'Business Universe',
            icon: 'üåç',
            url: 'business_universe_navigator.html',
            category: 'navigation',
            badge: '58',
            isPinned: true
          },
          {
            id: 'pixelprodigy3d',
            name: 'PixelProdigy 3D',
            icon: 'üé®',
            url: 'pixelprodigy3d.html',
            category: 'creation',
            badge: null,
            isPinned: true
          },
          {
            id: 'wordweaver',
            name: 'WordWeaver',
            icon: '‚úçÔ∏è',
            url: 'pixelprodigy3d.html?workspace=wordweaver',
            category: 'productivity',
            badge: null,
            isPinned: true
          },
          {
            id: 'anatomy',
            name: 'Anatomy Studio',
            icon: 'ü¶¥',
            url: 'pixelprodigy3d.html?workspace=anatomy',
            category: 'education',
            badge: null,
            isPinned: false
          },
          {
            id: 'skyrelics',
            name: 'SkyRelics',
            icon: 'üè∞',
            url: 'pixelprodigy3d.html?dimension=skyrelics',
            category: 'gaming',
            badge: null,
            isPinned: false
          },
          
          // Tier 2: Content & Media
          {
            id: 'analytics',
            name: 'Live Analytics',
            icon: 'üìä',
            url: 'live_analytics_dashboard.html',
            category: 'business',
            badge: '143',
            isPinned: false
          },
          {
            id: 'nft',
            name: 'NFT Marketplace',
            icon: 'üé≠',
            url: 'nft_readiness_dashboard.html',
            category: 'blockchain',
            badge: null,
            isPinned: false
          },
          {
            id: 'css-editor',
            name: 'CSS Editor',
            icon: 'üé®',
            url: 'css_style_editor.html',
            category: 'development',
            badge: null,
            isPinned: false
          },
          
          // Tier 3: Utilities
          {
            id: 'settings',
            name: 'Settings',
            icon: '‚öôÔ∏è',
            url: '#settings',
            category: 'system',
            badge: null,
            isPinned: true
          },
          {
            id: 'browser',
            name: 'Browser',
            icon: 'üåê',
            url: '#browser',
            category: 'internet',
            badge: null,
            isPinned: true
          },
          {
            id: 'files',
            name: 'Files',
            icon: 'üìÅ',
            url: '#files',
            category: 'system',
            badge: null,
            isPinned: false
          },
          
          // More apps from the 144 AI personalities and 10,296 applications
          // These will be fetched from cloud when online
        ];
        
        // Load additional apps from cloud if online
        if (this.isOnline) {
          await this.fetchCloudApps();
        }
        
        console.log(`‚úÖ Loaded ${this.apps.length} apps`);
      }

      async fetchCloudApps() {
        try {
          // In production, fetch from: https://api.eugeneous.dev/v1/apps
          console.log('‚òÅÔ∏è Fetching cloud apps...');
          
          // Simulated additional apps (in production, this comes from backend)
          const cloudApps = [
            { id: 'chat', name: 'AI Chat', icon: 'üí¨', url: '#chat', category: 'ai', badge: '5', isPinned: false },
            { id: 'music', name: 'Music Studio', icon: 'üéµ', url: '#music', category: 'media', badge: null, isPinned: false },
            { id: 'photos', name: 'Photos', icon: 'üì∑', url: '#photos', category: 'media', badge: '234', isPinned: false },
            { id: 'notes', name: 'Notes', icon: 'üìù', url: '#notes', category: 'productivity', badge: null, isPinned: false },
            { id: 'calendar', name: 'Calendar', icon: 'üìÖ', url: '#calendar', category: 'productivity', badge: '3', isPinned: false },
            { id: 'email', name: 'Email', icon: 'üìß', url: '#email', category: 'communication', badge: '12', isPinned: false },
            { id: 'maps', name: 'Maps', icon: 'üó∫Ô∏è', url: '#maps', category: 'navigation', badge: null, isPinned: false },
            { id: 'weather', name: 'Weather', icon: 'üå§Ô∏è', url: '#weather', category: 'info', badge: null, isPinned: false },
          ];
          
          this.apps.push(...cloudApps);
          
        } catch (error) {
          console.warn('‚ö†Ô∏è Cloud apps unavailable, using local cache');
        }
      }

      setupUI() {
        const appGrid = document.getElementById('appGrid');
        const dock = document.getElementById('dock');
        
        // Filter dock apps (pinned)
        const dockApps = this.apps.filter(app => app.isPinned);
        const gridApps = this.apps.filter(app => !app.isPinned);
        
        // Render grid apps
        gridApps.forEach(app => {
          const appItem = this.createAppElement(app);
          appGrid.appendChild(appItem);
        });
        
        // Render dock apps
        dockApps.forEach(app => {
          const appItem = this.createAppElement(app, true);
          dock.appendChild(appItem);
        });
        
        // Setup search
        document.getElementById('searchInput').addEventListener('input', (e) => {
          this.searchApps(e.target.value);
        });
      }

      createAppElement(app, isDock = false) {
        const appItem = document.createElement('div');
        appItem.className = 'app-item';
        appItem.onclick = () => this.openApp(app);
        
        const appIcon = document.createElement('div');
        appIcon.className = 'app-icon';
        appIcon.textContent = app.icon;
        
        if (app.badge) {
          const badge = document.createElement('div');
          badge.className = 'app-badge';
          badge.textContent = app.badge;
          appIcon.appendChild(badge);
        }
        
        appItem.appendChild(appIcon);
        
        if (!isDock) {
          const appName = document.createElement('div');
          appName.className = 'app-name';
          appName.textContent = app.name;
          appItem.appendChild(appName);
        }
        
        return appItem;
      }

      openApp(app) {
        console.log(`üöÄ Opening app: ${app.name}`);
        
        const appView = document.getElementById('appView');
        const appTitle = document.getElementById('appViewTitle');
        const appContent = document.getElementById('appContent');
        
        appTitle.textContent = app.name;
        
        // If URL is external HTML file, load in iframe
        if (app.url.endsWith('.html')) {
          appContent.innerHTML = `<iframe class="app-iframe" src="${app.url}"></iframe>`;
        } else {
          // Internal view
          appContent.innerHTML = `
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 20px; text-align: center;">
              <div style="font-size: 80px; margin-bottom: 20px;">${app.icon}</div>
              <div style="font-size: 24px; font-weight: 600; margin-bottom: 10px;">${app.name}</div>
              <div style="font-size: 14px; opacity: 0.7;">This app is coming soon in EugeneOusOS v2.0</div>
            </div>
          `;
        }
        
        appView.classList.add('active');
      }

      searchApps(query) {
        const appGrid = document.getElementById('appGrid');
        const allApps = appGrid.querySelectorAll('.app-item');
        
        if (!query) {
          allApps.forEach(app => app.style.display = 'flex');
          return;
        }
        
        const lowerQuery = query.toLowerCase();
        
        allApps.forEach((appElement, index) => {
          const app = this.apps.filter(a => !a.isPinned)[index];
          if (app && app.name.toLowerCase().includes(lowerQuery)) {
            appElement.style.display = 'flex';
          } else {
            appElement.style.display = 'none';
          }
        });
      }

      setupOfflineMode() {
        const statusEl = document.getElementById('connectionStatus');
        
        window.addEventListener('online', () => {
          this.isOnline = true;
          statusEl.textContent = '‚úÖ Connected';
          statusEl.className = 'connection-status online';
          setTimeout(() => {
            statusEl.style.display = 'none';
          }, 2000);
          
          this.showNotification('Back Online', 'Syncing latest apps...');
          this.fetchCloudApps();
        });
        
        window.addEventListener('offline', () => {
          this.isOnline = false;
          statusEl.textContent = '‚ùå Offline Mode';
          statusEl.className = 'connection-status offline';
          
          this.showNotification('Offline Mode', 'Using cached apps');
        });
      }

      setupNotifications() {
        // Request notification permission
        if ('Notification' in window && Notification.permission === 'default') {
          Notification.requestPermission();
        }
      }

      showNotification(title, text) {
        const notification = document.getElementById('notification');
        const titleEl = document.getElementById('notificationTitle');
        const textEl = document.getElementById('notificationText');
        
        titleEl.textContent = title;
        textEl.textContent = text;
        
        notification.classList.add('show');
        
        setTimeout(() => {
          notification.classList.remove('show');
        }, 3000);
      }

      updateStatusBar() {
        // Time
        const now = new Date();
        const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
        document.getElementById('statusTime').textContent = timeStr;
        
        // Signal/WiFi
        document.getElementById('statusWifi').textContent = this.isOnline ? 'üì°' : 'üö´';
        
        // Battery (if available)
        if ('getBattery' in navigator) {
          navigator.getBattery().then(battery => {
            const level = Math.round(battery.level * 100);
            const charging = battery.charging;
            
            let batteryIcon = 'üîã';
            if (charging) batteryIcon = '‚ö°';
            else if (level < 20) batteryIcon = 'ü™´';
            
            document.getElementById('statusBattery').textContent = batteryIcon;
          });
        }
      }
    }

    // Close app function (global)
    function closeApp() {
      document.getElementById('appView').classList.remove('active');
    }

    // Initialize EugeneOusOS on load
    let eugeneOS;
    window.addEventListener('load', () => {
      eugeneOS = new EugeneOusOS();
    });

    // Register Service Worker for offline support
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('geneclone_sw.js').then(registration => {
        console.log('‚úÖ Service Worker registered:', registration);
      }).catch(error => {
        console.log('‚ö†Ô∏è Service Worker registration failed:', error);
      });
    }
  </script>
</body>
</html>
