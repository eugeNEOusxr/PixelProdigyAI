<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VSL Facial Features Demo</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Courier New', monospace;
            background: #1a1a2e;
            color: #00ff00;
        }
        #canvas {
            display: block;
        }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border: 2px solid #00ff00;
            border-radius: 8px;
            max-width: 350px;
        }
        h2 {
            margin: 0 0 10px 0;
            color: #00ffff;
        }
        .feature {
            margin: 8px 0;
            padding: 5px;
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
        }
        .feature.added {
            border-left-color: #ffff00;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
    </style>
</head>
<body>
    <div id="info">
        <h2>üëÅÔ∏è VSL Facial Features</h2>
        <div class="feature added">‚úÖ Eye Sockets (recessed)</div>
        <div class="feature added">‚úÖ Eyes (sclera + iris + pupil)</div>
        <div class="feature added">‚úÖ Eyebrows (angled)</div>
        <div class="feature added">‚úÖ Nose (protruding)</div>
        <div style="margin-top: 10px; font-size: 11px;">
            <strong>Controls:</strong><br>
            ‚Ä¢ Left drag: Rotate<br>
            ‚Ä¢ Right drag: Pan<br>
            ‚Ä¢ Scroll: Zoom<br>
            ‚Ä¢ Space: Auto-rotate
        </div>
    </div>
    <canvas id="canvas"></canvas>

    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // Setup scene
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a1a2e);
        scene.fog = new THREE.Fog(0x1a1a2e, 5, 15);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 1.7, 0.8); // Face level, close up

        const renderer = new THREE.WebGLRenderer({ 
            canvas: document.getElementById('canvas'),
            antialias: true 
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.target.set(0, 1.7, 0);
        controls.update();

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const keyLight = new THREE.DirectionalLight(0xffffff, 0.8);
        keyLight.position.set(2, 3, 2);
        keyLight.castShadow = true;
        scene.add(keyLight);

        const rimLight = new THREE.SpotLight(0xaaaaff, 0.5);
        rimLight.position.set(-2, 3, -2);
        scene.add(rimLight);

        // Create VSL head with facial features
        function createVSLFace() {
            const face = new THREE.Group();

            // Skin material
            const skinMaterial = new THREE.MeshStandardMaterial({
                color: 0xffccaa,
                roughness: 0.7,
                metalness: 0.0
            });

            // HEAD BASE
            const headGeo = new THREE.IcosahedronGeometry(0.18, 3);
            const headMesh = new THREE.Mesh(headGeo, skinMaterial);
            headMesh.castShadow = true;
            headMesh.receiveShadow = true;
            face.add(headMesh);

            // EYE SOCKETS
            const eyeSocketMaterial = new THREE.MeshStandardMaterial({
                color: 0xd4a574,
                roughness: 0.8,
                metalness: 0.0
            });

            const leftSocketGeo = new THREE.SphereGeometry(0.045, 12, 12);
            const leftSocket = new THREE.Mesh(leftSocketGeo, eyeSocketMaterial);
            leftSocket.position.set(-0.06, 0.04, 0.14);
            leftSocket.scale.set(1.2, 0.8, 0.6);
            leftSocket.castShadow = true;
            leftSocket.receiveShadow = true;
            face.add(leftSocket);

            const rightSocket = leftSocket.clone();
            rightSocket.position.x = 0.06;
            face.add(rightSocket);

            // EYES (white sclera)
            const eyeWhiteMaterial = new THREE.MeshStandardMaterial({
                color: 0xffffff,
                roughness: 0.3,
                metalness: 0.0
            });

            const eyeGeo = new THREE.SphereGeometry(0.035, 12, 12);
            const leftEye = new THREE.Mesh(eyeGeo, eyeWhiteMaterial);
            leftEye.position.set(-0.06, 0.04, 0.16);
            leftEye.castShadow = true;
            face.add(leftEye);

            const rightEye = leftEye.clone();
            rightEye.position.x = 0.06;
            face.add(rightEye);

            // IRIS (blue)
            const irisMaterial = new THREE.MeshStandardMaterial({
                color: 0x4488cc,
                roughness: 0.2,
                metalness: 0.1
            });

            const irisGeo = new THREE.CircleGeometry(0.015, 16);
            const leftIris = new THREE.Mesh(irisGeo, irisMaterial);
            leftIris.position.set(-0.06, 0.04, 0.195);
            face.add(leftIris);

            const rightIris = leftIris.clone();
            rightIris.position.x = 0.06;
            face.add(rightIris);

            // PUPIL (black)
            const pupilMaterial = new THREE.MeshStandardMaterial({
                color: 0x000000,
                roughness: 0.1,
                metalness: 0.0
            });

            const pupilGeo = new THREE.CircleGeometry(0.008, 12);
            const leftPupil = new THREE.Mesh(pupilGeo, pupilMaterial);
            leftPupil.position.set(-0.06, 0.04, 0.196);
            face.add(leftPupil);

            const rightPupil = leftPupil.clone();
            rightPupil.position.x = 0.06;
            face.add(rightPupil);

            // EYEBROWS
            const eyebrowMaterial = new THREE.MeshStandardMaterial({
                color: 0x4a3728,
                roughness: 0.9,
                metalness: 0.0
            });

            const eyebrowGeo = new THREE.BoxGeometry(0.08, 0.015, 0.008);
            const leftEyebrow = new THREE.Mesh(eyebrowGeo, eyebrowMaterial);
            leftEyebrow.position.set(-0.06, 0.09, 0.16);
            leftEyebrow.rotation.z = 0.15;
            leftEyebrow.castShadow = true;
            face.add(leftEyebrow);

            const rightEyebrow = leftEyebrow.clone();
            rightEyebrow.position.x = 0.06;
            rightEyebrow.rotation.z = -0.15;
            face.add(rightEyebrow);

            // NOSE
            const noseGeo = new THREE.ConeGeometry(0.025, 0.08, 4);
            const noseMesh = new THREE.Mesh(noseGeo, skinMaterial);
            noseMesh.position.set(0, -0.01, 0.17);
            noseMesh.rotation.x = Math.PI / 2;
            noseMesh.castShadow = true;
            noseMesh.receiveShadow = true;
            face.add(noseMesh);

            face.position.y = 1.7;
            return face;
        }

        const vslFace = createVSLFace();
        scene.add(vslFace);

        // Ground plane
        const groundGeo = new THREE.PlaneGeometry(10, 10);
        const groundMat = new THREE.MeshStandardMaterial({ 
            color: 0x2a2a3e,
            roughness: 0.9 
        });
        const ground = new THREE.Mesh(groundGeo, groundMat);
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);

        // Auto-rotate toggle
        let autoRotate = false;
        window.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                autoRotate = !autoRotate;
                controls.autoRotate = autoRotate;
            }
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            
            controls.update();
            renderer.render(scene, camera);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();

        console.log('üëÅÔ∏è VSL Facial Features Demo');
        console.log('Rotate the view to see all facial details!');
    </script>
</body>
</html>
