<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VSL Extreme Realism Demo</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
        }
        
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #00ff00;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border: 2px solid #00ff00;
            border-radius: 5px;
            font-size: 12px;
            max-width: 350px;
            z-index: 100;
        }
        
        #info h2 {
            margin: 0 0 10px 0;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
        }
        
        #info ul {
            margin: 5px 0;
            padding-left: 20px;
        }
        
        #controls {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #ffff00;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border: 2px solid #ffff00;
            border-radius: 5px;
            font-size: 12px;
            z-index: 100;
        }
        
        #controls button {
            background: #333;
            color: #ffff00;
            border: 1px solid #ffff00;
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }
        
        #controls button:hover {
            background: #555;
            box-shadow: 0 0 10px #ffff00;
        }
        
        #stats {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: #ff00ff;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border: 2px solid #ff00ff;
            border-radius: 5px;
            font-size: 11px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="info">
        <h2>üß¨ VSL EXTREME REALISM DEMO</h2>
        <p><strong>Characters:</strong></p>
        <ul>
            <li><span style="color: #ff6666;">Dirty Fighter</span> - Black eye, scars, sweat, dirt</li>
            <li><span style="color: #6666ff;">Painter</span> - Paint splatters, grease stains</li>
            <li><span style="color: #66ff66;">Clean Person</span> - Freckles, body details</li>
        </ul>
        <p><strong>Bathroom:</strong> Right side with bathtub, tiles, shower</p>
    </div>
    
    <div id="controls">
        <h3 style="margin: 0 0 10px 0;">üéÆ CONTROLS</h3>
        <button onclick="cleanFighter()">üßº Clean Fighter</button>
        <button onclick="cleanPainter()">üßΩ Clean Painter</button>
        <button onclick="bathFighter()">üõÅ Bathe Fighter</button>
        <button onclick="toggleBodyDetails()">üëÅÔ∏è Toggle Body Details</button>
        <button onclick="addDirt()">üí© Add Random Dirt</button>
        <button onclick="addPaint()">üé® Add Random Paint</button>
    </div>
    
    <div id="stats">
        <div id="statsContent">Loading...</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="vsl_character_generator.js"></script>
    <script>
        // Scene setup
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a1a2e);
        scene.fog = new THREE.Fog(0x1a1a2e, 5, 15);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 1.6, 4);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document.body.appendChild(renderer.domElement);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(5, 10, 5);
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 2048;
        directionalLight.shadow.mapSize.height = 2048;
        scene.add(directionalLight);

        const fillLight = new THREE.PointLight(0x6666ff, 0.4);
        fillLight.position.set(-5, 3, 5);
        scene.add(fillLight);

        // Ground
        const groundGeo = new THREE.PlaneGeometry(20, 20);
        const groundMat = new THREE.MeshStandardMaterial({ 
            color: 0x2a2a3e, 
            roughness: 0.9 
        });
        const ground = new THREE.Mesh(groundGeo, groundMat);
        ground.rotation.x = -Math.PI / 2;
        ground.receiveShadow = true;
        scene.add(ground);

        // Create VSL Character Generator
        const vslGen = new VSLCharacterGenerator(scene);

        // Character 1: Dirty Fighter with black eye, scars, sweat
        const fighter = vslGen.createCharacter({
            name: 'Dirty_Fighter',
            position: {x: -2, y: 0, z: 0},
            
            skinDamage: {
                scars: [
                    {x: 0.03, y: 1.58, z: 0.12, length: 0.04, rotation: Math.PI/4, color: 0xffaaaa},
                    {x: -0.05, y: 1.54, z: 0.11, length: 0.03, rotation: -Math.PI/6, color: 0xffaaaa}
                ],
                freckles: 15,
                blackEye: {side: 'left', stage: 1}  // Blue stage
            },
            
            skinConditions: {
                sweat: 0.6,
                dirt: [
                    {x: 0.1, y: 1.2, z: 0.15},
                    {x: -0.08, y: 1.25, z: 0.14},
                    {x: 0.15, y: 0.5, z: 0.1}  // Dirty hands
                ]
            },
            
            bodyHair: {
                chestHair: 0.7,
                soulPatch: true,
                color: 0x332211
            },
            
            extremityWrinkles: true,
            
            eyeConditions: {
                tired: true,
                retinas: 'brown'
            },
            
            bodyDetails: true
        });

        // Character 2: Painter with paint splatters
        const painter = vslGen.createCharacter({
            name: 'Painter',
            position: {x: 0, y: 0, z: 0},
            
            skinConditions: {
                paint: [
                    {
                        x: 0.15, y: 1.1, z: 0.16,
                        width: 0.08, height: 0.08, thickness: 0.004,
                        color: 0xff0000,
                        type: 'paint'
                    },
                    {
                        x: -0.12, y: 1.15, z: 0.15,
                        width: 0.06, height: 0.06, thickness: 0.003,
                        color: 0x0000ff,
                        type: 'polymer'
                    },
                    {
                        x: 0.05, y: 1.05, z: 0.17,
                        width: 0.04, height: 0.04, thickness: 0.002,
                        color: 0xffff00,
                        type: 'paint'
                    }
                ],
                grease: [
                    {x: 0, y: 0.5, z: 0.1},  // Greasy hands
                    {x: -0.1, y: 0.48, z: 0.09}
                ],
                sweat: 0.3
            },
            
            bodyHair: {
                chestHair: 0.4,
                pubicHair: 'trimmed'
            },
            
            extremityWrinkles: true,
            
            eyeConditions: {
                retinas: 'blue'
            },
            
            bodyDetails: true
        });

        // Character 3: Clean person with freckles
        const cleanPerson = vslGen.createCharacter({
            name: 'Clean_Person',
            position: {x: 2, y: 0, z: 0},
            
            skinDamage: {
                freckles: 25,
                moles: [
                    {x: 0.05, y: 1.55, z: 0.11, size: 0.004},
                    {x: -0.08, y: 1.3, z: 0.14, size: 0.005}
                ],
                birthmarks: [
                    {x: 0.1, y: 1.4, z: 0.15, width: 0.03, height: 0.02, color: 0x8b4513}
                ]
            },
            
            bodyHair: {
                pubicHair: 'trimmed',
                color: 0x663311
            },
            
            extremityWrinkles: true,
            
            eyeConditions: {
                retinas: 'green'
            },
            
            bodyDetails: true
        });

        // Create bathroom environment
        const bathroom = vslGen.createBathroom({x: 6, y: 0, z: 0});

        // Store references for controls
        window.fighter = fighter;
        window.painter = painter;
        window.cleanPerson = cleanPerson;
        window.bathroom = bathroom;
        window.vslGen = vslGen;

        // Control functions
        window.cleanFighter = function() {
            const removed = vslGen.cleanCharacter(fighter, {method: 'soap', intensity: 0.8});
            console.log(`üßº Cleaned ${removed} dirt/grease patches from fighter`);
            updateStats();
        };

        window.cleanPainter = function() {
            const removed = vslGen.cleanCharacter(painter, {method: 'soap', intensity: 0.9});
            console.log(`üßΩ Cleaned ${removed} paint/grease patches from painter`);
            updateStats();
        };

        window.bathFighter = function() {
            vslGen.bathCharacter(fighter, bathroom.children[0]);
            console.log(`üõÅ Fighter took a bath - fully cleaned!`);
            updateStats();
        };

        window.toggleBodyDetails = function() {
            // Toggle asshole visibility
            [fighter, painter, cleanPerson].forEach(char => {
                char.meshes.forEach(mesh => {
                    if (mesh.geometry.type === 'TorusGeometry' && 
                        mesh.position.y < 0.8 && 
                        mesh.position.z < -0.05) {
                        mesh.visible = !mesh.visible;
                    }
                });
            });
            console.log(`üëÅÔ∏è Toggled body details visibility`);
        };

        window.addDirt = function() {
            const chars = [fighter, painter, cleanPerson];
            const randomChar = chars[Math.floor(Math.random() * chars.length)];
            
            const dirtGeo = new THREE.BoxGeometry(0.05, 0.05, 0.001);
            const dirtMat = new THREE.MeshStandardMaterial({ 
                color: 0x4a3f2a, 
                roughness: 1.0 
            });
            const dirtMesh = new THREE.Mesh(dirtGeo, dirtMat);
            dirtMesh.position.set(
                (Math.random() - 0.5) * 0.3,
                1.0 + Math.random() * 0.4,
                0.12 + Math.random() * 0.05
            );
            randomChar.skin.add(dirtMesh);
            randomChar.meshes.push(dirtMesh);
            
            console.log(`üí© Added dirt to ${randomChar.name}`);
            updateStats();
        };

        window.addPaint = function() {
            const chars = [fighter, painter, cleanPerson];
            const randomChar = chars[Math.floor(Math.random() * chars.length)];
            const colors = [0xff0000, 0x00ff00, 0x0000ff, 0xffff00, 0xff00ff];
            
            const paintGeo = new THREE.BoxGeometry(0.06, 0.06, 0.003);
            const paintMat = new THREE.MeshStandardMaterial({ 
                color: colors[Math.floor(Math.random() * colors.length)], 
                roughness: 0.4 
            });
            const paintMesh = new THREE.Mesh(paintGeo, paintMat);
            paintMesh.position.set(
                (Math.random() - 0.5) * 0.3,
                1.0 + Math.random() * 0.3,
                0.13 + Math.random() * 0.04
            );
            randomChar.skin.add(paintMesh);
            randomChar.meshes.push(paintMesh);
            
            console.log(`üé® Added paint to ${randomChar.name}`);
            updateStats();
        };

        // Stats update
        function updateStats() {
            const stats = `
                <strong>MESH COUNTS:</strong><br>
                Fighter: ${fighter.meshes.length} meshes<br>
                Painter: ${painter.meshes.length} meshes<br>
                Clean: ${cleanPerson.meshes.length} meshes<br>
                Bathroom: ${bathroom.children.length} objects<br>
                <strong>Total Scene:</strong> ${scene.children.length} objects
            `;
            document.getElementById('statsContent').innerHTML = stats;
        }

        // Camera controls (mouse drag)
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        
        renderer.domElement.addEventListener('mousedown', () => {
            isDragging = true;
        });
        
        renderer.domElement.addEventListener('mouseup', () => {
            isDragging = false;
        });
        
        renderer.domElement.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - previousMousePosition.x;
                const deltaY = e.clientY - previousMousePosition.y;
                
                camera.position.x -= deltaX * 0.01;
                camera.position.y += deltaY * 0.01;
                camera.lookAt(0, 1.5, 0);
            }
            
            previousMousePosition = { x: e.clientX, y: e.clientY };
        });
        
        // Zoom with mouse wheel
        renderer.domElement.addEventListener('wheel', (e) => {
            camera.position.z += e.deltaY * 0.01;
            camera.position.z = Math.max(2, Math.min(camera.position.z, 10));
        });

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);
            
            // Rotate characters slowly
            fighter.skin.rotation.y += 0.002;
            painter.skin.rotation.y += 0.002;
            cleanPerson.skin.rotation.y += 0.002;
            
            camera.lookAt(0, 1.5, 0);
            renderer.render(scene, camera);
        }

        // Window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Initialize stats
        updateStats();
        animate();
        
        console.log('üß¨ VSL EXTREME REALISM DEMO LOADED');
        console.log('Use mouse to rotate camera, scroll to zoom');
        console.log('Click buttons to interact with characters');
    </script>
</body>
</html>
