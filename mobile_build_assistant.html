<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üì± Mobile Build Assistant - PixelProdigy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .build-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .build-button {
            background: linear-gradient(135deg, #00ff88 0%, #00ccff 100%);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .build-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 136, 0.4);
        }

        .build-button:active {
            transform: translateY(0);
        }

        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .quick-link {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
        }

        .quick-link:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .quick-link .icon {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }

        .status {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .status.success {
            border-left: 4px solid #00ff88;
        }

        .status.warning {
            border-left: 4px solid #ffaa00;
        }

        .status.error {
            border-left: 4px solid #ff4444;
        }

        .qr-container {
            text-align: center;
            margin: 30px 0;
            position: relative;
        }

        .qr-modes {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .qr-mode-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .qr-mode-btn.active {
            background: linear-gradient(135deg, #00ff88 0%, #00ccff 100%);
            color: #000;
            border-color: #00ff88;
        }

        .qr-code {
            width: 200px;
            height: 200px;
            background: white;
            border-radius: 15px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            color: #667eea;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.5s ease;
        }

        .qr-code.animated::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            background: 
                repeating-linear-gradient(0deg, #667eea 0px, #667eea 2px, white 2px, white 4px),
                repeating-linear-gradient(90deg, #667eea 0px, #667eea 2px, white 2px, white 4px);
            opacity: 0.6;
            animation: qrPulse 3s ease-in-out infinite;
        }

        .qr-code.static::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 8px;
            right: 8px;
            bottom: 8px;
            background: 
                repeating-linear-gradient(0deg, #000 0px, #000 3px, white 3px, white 6px),
                repeating-linear-gradient(90deg, #000 0px, #000 3px, white 3px, white 6px);
            opacity: 0.8;
        }

        .dinosaur {
            position: relative;
            z-index: 2;
            transition: all 0.5s ease;
        }

        .dinosaur.animated {
            animation: dinoParty 2s ease-in-out infinite;
        }

        .dinosaur.static {
            animation: none;
            transform: scale(1);
        }

        @keyframes dinoParty {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-5deg); }
            50% { transform: scale(1.3) rotate(5deg); }
            75% { transform: scale(1.1) rotate(-3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        @keyframes qrPulse {
            0%, 100% { 
                transform: scale(1);
                background-size: 8px 8px;
            }
            50% { 
                transform: scale(1.05);
                background-size: 12px 12px;
            }
        }

        .hover-zones {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1000;
        }

        .hover-zone {
            position: absolute;
            pointer-events: auto;
            background: rgba(255, 255, 255, 0.02);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .hover-zone::before {
            content: attr(data-label);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            opacity: 0;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .hover-zone:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(0, 255, 136, 0.6);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .hover-zone:hover::before {
            opacity: 1;
            transform: translate(-50%, -60%);
        }

        .environment-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .environment-transition.active {
            display: flex;
            animation: fadeIn 0.5s ease;
        }

        .transition-content {
            text-align: center;
            color: white;
        }

        .transition-content h2 {
            font-size: 3em;
            margin-bottom: 20px;
            animation: pulse 1s ease-in-out infinite;
        }

        .coding-workspace {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 0;
            background: #1a1a1a;
            display: none;
            flex-direction: column;
            z-index: 1500;
        }

        .coding-workspace.active {
            display: flex;
        }

        .workspace-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .workspace-tabs {
            display: flex;
            gap: 5px;
            flex: 1;
        }

        .workspace-tab {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .workspace-tab.active {
            background: rgba(255, 255, 255, 0.3);
        }

        .code-editor {
            flex: 1;
            background: #1e1e1e;
            position: relative;
            overflow: hidden;
        }

        .code-lines {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.4;
            color: #d4d4d4;
            padding: 20px;
            height: 100%;
            overflow-y: auto;
        }

        .line-number {
            color: #858585;
            margin-right: 15px;
            user-select: none;
        }

        .code-line {
            margin: 2px 0;
        }

        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .comment { color: #6a9955; }
        .function { color: #dcdcaa; }
        .variable { color: #9cdcfe; }

        .mobile-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .feature .emoji {
            font-size: 2em;
            margin-bottom: 10px;
            display: block;
        }

        .build-log {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .copy-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .build-card {
                padding: 20px;
            }

            .quick-links {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì± Mobile Build Assistant</h1>
            <p>Build your PixelProdigy dreams from anywhere!</p>
        </div>

        <div class="build-card">
            <h2>ü¶ï Revolutionary QR Code System</h2>
            <p>World's first ANIMATED QR codes for online sharing + static for print!</p>
            
            <div class="qr-container">
                <div class="qr-modes">
                    <button class="qr-mode-btn active" onclick="setQRMode('animated')">
                        üé¨ ANIMATED (Online)
                    </button>
                    <button class="qr-mode-btn" onclick="setQRMode('static')">
                        üìÑ STATIC (Print)
                    </button>
                </div>
                
                <div class="qr-code animated" id="qrCode">
                    <span class="dinosaur animated" id="dinosaur">ü¶ï</span>
                </div>
                
                <p><strong id="qrDescription">Animated QR - Perfect for live sharing!</strong></p>
                <button class="copy-button" onclick="copyURL()">üìã Copy URL</button>
                <button class="copy-button" onclick="downloadQR()">üíæ Download QR</button>
            </div>
        </div>

        <div class="build-card">
            <h2>üöÄ Quick Build Actions</h2>
            <button class="build-button" onclick="openCodingWorkspace()">
                üíª GURU CODING MODE
            </button>
            <button class="build-button" onclick="runBuild('typescript')">
                üîß Build TypeScript (npm run pixelprodigy3d)
            </button>
            <button class="build-button" onclick="runBuild('server')">
                üåê Start Server (npm start)
            </button>
            <button class="build-button" onclick="runBuild('both')">
                ‚ö° Build & Run (Full Pipeline)
            </button>
            <button class="build-button" onclick="openApp()">
                üé® Open PixelProdigy Studio
            </button>
        </div>

        <div class="quick-links">
            <a href="pixelprodigy3d.html" class="quick-link">
                <span class="icon">üé®</span>
                <strong>3D Studio</strong><br>
                Full sculpting environment
            </a>
            <a href="browisexr.html" class="quick-link">
                <span class="icon">üîç</span>
                <strong>BroWiseXR</strong><br>
                Object browser
            </a>
            <a href="college_building_library.html" class="quick-link">
                <span class="icon">üè´</span>
                <strong>Building Library</strong><br>
                Architectural tools
            </a>
            <a href="beta_dashboard.html" class="quick-link">
                <span class="icon">üìä</span>
                <strong>Beta Dashboard</strong><br>
                Testing & analytics
            </a>
        </div>

        <div class="mobile-features">
            <div class="feature">
                <span class="emoji">üëÜ</span>
                <h3>Touch Sculpting</h3>
                <p>Single finger to sculpt, fast drag to orbit camera</p>
            </div>
            <div class="feature">
                <span class="emoji">ü§è</span>
                <h3>Pinch & Twist</h3>
                <p>Two fingers to zoom and rotate naturally</p>
            </div>
            <div class="feature">
                <span class="emoji">‚úã</span>
                <h3>Three-Finger Pan</h3>
                <p>Move camera focus point anywhere</p>
            </div>
            <div class="feature">
                <span class="emoji">üïπÔ∏è</span>
                <h3>Virtual Joystick</h3>
                <p>WASD movement for possessed objects</p>
            </div>
        </div>

        <div id="buildStatus" class="status" style="display: none;">
            <strong>Build Status:</strong> <span id="statusText">Ready</span>
        </div>

        <div id="buildLog" class="build-log" style="display: none;">
            <strong>Build Log:</strong><br>
            <div id="logContent"></div>
        </div>

        <div class="build-card">
            <h2>üí° Mobile Building Tips</h2>
            <ul style="text-align: left; line-height: 1.6;">
                <li><strong>Best Performance:</strong> Use Chrome or Safari on mobile</li>
                <li><strong>Touch Controls:</strong> All gestures work on touchscreen</li>
                <li><strong>Responsive UI:</strong> Panels auto-collapse on mobile</li>
                <li><strong>No Downloads:</strong> Everything runs in your browser</li>
                <li><strong>Offline Ready:</strong> Local storage saves your work</li>
                <li><strong>Share Easy:</strong> Send the QR code to anyone</li>
            </ul>
        </div>
    </div>

    <!-- Hover Zones for Environment Transitions -->
    <div class="hover-zones">
        <div class="hover-zone" data-label="üé® 3D Studio" style="top: 10%; left: 10%; width: 25%; height: 20%;" onclick="transitionTo('pixelprodigy3d.html', '3D Studio')"></div>
        <div class="hover-zone" data-label="üîç Object Browser" style="top: 10%; right: 10%; width: 25%; height: 20%;" onclick="transitionTo('browisexr.html', 'Object Browser')"></div>
        <div class="hover-zone" data-label="üè´ Building Tools" style="bottom: 20%; left: 10%; width: 25%; height: 15%;" onclick="transitionTo('college_building_library.html', 'Building Tools')"></div>
        <div class="hover-zone" data-label="üìä Analytics" style="bottom: 20%; right: 10%; width: 25%; height: 15%;" onclick="transitionTo('beta_dashboard.html', 'Analytics')"></div>
    </div>

    <!-- Environment Transition Overlay -->
    <div class="environment-transition" id="envTransition">
        <div class="transition-content">
            <h2 id="transitionTitle">üöÄ Loading...</h2>
            <p id="transitionDesc">Preparing your environment...</p>
            <div style="margin-top: 20px;">
                <div style="width: 200px; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; margin: 0 auto;">
                    <div id="transitionProgress" style="width: 0%; height: 100%; background: linear-gradient(90deg, #00ff88, #00ccff); border-radius: 2px; transition: width 0.3s ease;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Coding Workspace -->
    <div class="coding-workspace" id="codingWorkspace">
        <div class="workspace-header">
            <div style="font-weight: bold;">üíª GURU CODING MODE</div>
            <div class="workspace-tabs">
                <div class="workspace-tab active" onclick="switchTab('mobile_build_assistant.html')">Mobile Assistant</div>
                <div class="workspace-tab" onclick="switchTab('pixelprodigy3d.html')">3D Studio</div>
                <div class="workspace-tab" onclick="switchTab('server.ts')">Backend</div>
                <div class="workspace-tab" onclick="switchTab('package.json')">Config</div>
            </div>
            <button onclick="closeCodingWorkspace()" style="background: rgba(255,255,255,0.1); border: none; color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer;">‚úï</button>
        </div>
        <div class="code-editor">
            <div class="code-lines" id="codeContent">
                <!-- Code will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        // QR Code Mode Management
        let currentQRMode = 'animated';

        function setQRMode(mode) {
            currentQRMode = mode;
            const qrCode = document.getElementById('qrCode');
            const dinosaur = document.getElementById('dinosaur');
            const description = document.getElementById('qrDescription');
            const buttons = document.querySelectorAll('.qr-mode-btn');

            // Update button states
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update QR code appearance
            qrCode.className = `qr-code ${mode}`;
            dinosaur.className = `dinosaur ${mode}`;

            // Update description
            if (mode === 'animated') {
                description.textContent = 'Animated QR - Perfect for live sharing!';
                addToLog('üé¨ Switched to ANIMATED QR mode - dinosaur party activated!');
            } else {
                description.textContent = 'Static QR - Print ready & scannable!';
                addToLog('üìÑ Switched to STATIC QR mode - clean for printing');
            }

            showStatus(`QR mode: ${mode.toUpperCase()}`, 'success');
        }

        function downloadQR() {
            // Create canvas for QR code generation
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 400;
            canvas.height = 400;

            // White background
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, 400, 400);

            if (currentQRMode === 'static') {
                // Generate static QR pattern
                ctx.fillStyle = 'black';
                for (let x = 20; x < 380; x += 12) {
                    for (let y = 20; y < 380; y += 12) {
                        if ((Math.floor(x/12) + Math.floor(y/12)) % 2 === 0) {
                            ctx.fillRect(x, y, 8, 8);
                        }
                    }
                }
                
                // Add corner markers
                const corners = [[20, 20], [20, 350], [350, 20]];
                corners.forEach(([x, y]) => {
                    ctx.fillRect(x, y, 50, 50);
                    ctx.fillStyle = 'white';
                    ctx.fillRect(x + 10, y + 10, 30, 30);
                    ctx.fillStyle = 'black';
                    ctx.fillRect(x + 20, y + 20, 10, 10);
                });

                // Add dinosaur in center (as text)
                ctx.font = '60px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ü¶ï', 200, 220);
            } else {
                // Animated version - capture current frame
                ctx.fillStyle = '#667eea';
                for (let x = 15; x < 385; x += 10) {
                    for (let y = 15; y < 385; y += 10) {
                        if (Math.random() > 0.3) {
                            ctx.fillRect(x, y, 6, 6);
                        }
                    }
                }
                ctx.font = '80px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ü¶ï', 200, 230);
            }

            // Download
            const link = document.createElement('a');
            link.download = `pixelprodigy-qr-${currentQRMode}-${Date.now()}.png`;
            link.href = canvas.toDataURL();
            link.click();

            addToLog(`üì• Downloaded ${currentQRMode} QR code`);
            showStatus('QR code downloaded!', 'success');
        }

        // Environment Transition System
        function transitionTo(url, name) {
            const transition = document.getElementById('envTransition');
            const title = document.getElementById('transitionTitle');
            const desc = document.getElementById('transitionDesc');
            const progress = document.getElementById('transitionProgress');

            title.textContent = `üöÄ ${name}`;
            desc.textContent = 'Loading environment...';
            transition.classList.add('active');

            // Animate progress bar
            let progressValue = 0;
            const progressInterval = setInterval(() => {
                progressValue += Math.random() * 20;
                if (progressValue > 100) {
                    progressValue = 100;
                    clearInterval(progressInterval);
                    
                    setTimeout(() => {
                        transition.classList.remove('active');
                        window.open(url, '_blank');
                        addToLog(`üåç Opened ${name} environment`);
                    }, 500);
                }
                progress.style.width = progressValue + '%';
            }, 100);

            addToLog(`üéØ Transitioning to ${name}...`);
        }

        // Coding Workspace
        function openCodingWorkspace() {
            const workspace = document.getElementById('codingWorkspace');
            workspace.classList.add('active');
            loadCodeFile('mobile_build_assistant.html');
            addToLog('üíª GURU CODING MODE activated!');
            showStatus('Welcome to GURU CODING MODE! üíª', 'success');
        }

        function closeCodingWorkspace() {
            const workspace = document.getElementById('codingWorkspace');
            workspace.classList.remove('active');
            addToLog('üíª Coding workspace closed');
        }

        function switchTab(filename) {
            // Update tab states
            document.querySelectorAll('.workspace-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            loadCodeFile(filename);
            addToLog(`üìÇ Switched to ${filename}`);
        }

        async function loadCodeFile(filename) {
            const codeContent = document.getElementById('codeContent');
            
            // Mock code content based on file
            let code = '';
            
            switch(filename) {
                case 'mobile_build_assistant.html':
                    code = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üì± Mobile Build Assistant - PixelProdigy</title>
    <style>
        /* Revolutionary mobile-first design */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            min-height: 100vh;
        }
        
        .qr-code.animated::before {
            animation: qrPulse 3s ease-in-out infinite;
        }
    </style>
</head>`;
                    break;
                    
                case 'pixelprodigy3d.html':
                    code = `// PixelProdigy 3D Studio Core
class PixelProdigy3D {
    constructor() {
        this.scene = new THREE.Scene();
        this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        this.renderer = new THREE.WebGLRenderer({ antialias: true });
        
        // Mobile touch controls
        this.touchState = {
            active: false,
            touches: [],
            pinching: false,
            sculpting: false
        };
        
        this.initMobileControls();
    }
    
    initMobileControls() {
        // Revolutionary touch gesture system
        document.addEventListener('touchstart', this.handleTouchStart.bind(this));
        document.addEventListener('touchmove', this.handleTouchMove.bind(this));
        document.addEventListener('touchend', this.handleTouchEnd.bind(this));
    }
}`;
                    break;
                    
                case 'server.ts':
                    code = `import express from 'express';
import cors from 'cors';
import { WebSocketServer } from 'ws';

const app = express();
const PORT = process.env.PORT || 3000;

// Mobile-optimized middleware
app.use(cors({
    origin: ['http://localhost:3000', 'https://eugeneous.dev'],
    credentials: true
}));

app.use(express.json({ limit: '50mb' }));
app.use(express.static('.'));

// Mobile build endpoints
app.post('/api/build/mobile', async (req, res) => {
    try {
        const { platform, optimizations } = req.body;
        
        // Mobile-specific build pipeline
        const buildResult = await buildForMobile(platform, optimizations);
        
        res.json({
            success: true,
            buildTime: buildResult.duration,
            optimizations: buildResult.applied,
            mobileFeatures: ['touch_controls', 'responsive_ui', 'offline_ready']
        });
    } catch (error) {
        res.status(500).json({ error: error.message });
    }
});`;
                    break;
                    
                case 'package.json':
                    code = `{
  "name": "pixelprodigy-mobile-guru",
  "version": "2.0.0",
  "description": "Revolutionary mobile-first 3D sculpting platform",
  "scripts": {
    "pixelprodigy3d": "tsc --project tsconfig.json",
    "start": "node dist/server.js",
    "build:mobile": "npm run pixelprodigy3d && npm run optimize:mobile",
    "optimize:mobile": "node scripts/mobile-optimizer.js",
    "dev:mobile": "concurrently \\"npm run pixelprodigy3d -- --watch\\" \\"npm start\\"",
    "test:mobile": "jest --config=jest.mobile.config.js"
  },
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "express": "^5.1.0",
    "three": "^0.158.0",
    "ws": "^8.18.3"
  },
  "mobileOptimizations": {
    "touchControls": true,
    "responsiveUI": true,
    "offlineSupport": true,
    "compressionLevel": "high",
    "targetDevices": ["ios", "android", "tablet"]
  }
}`;
                    break;
            }

            // Syntax highlight the code
            codeContent.innerHTML = syntaxHighlight(code);
        }

        function syntaxHighlight(code) {
            return code
                .split('\n')
                .map((line, index) => {
                    const lineNum = index + 1;
                    let highlightedLine = line
                        .replace(/\b(class|function|const|let|var|if|else|for|while|return|import|export|async|await)\b/g, '<span class="keyword">$1</span>')
                        .replace(/(["'`])((?:\\.|(?!\1)[^\\])*?)\1/g, '<span class="string">$1$2$1</span>')
                        .replace(/(\/\/.*$|\/\*[\s\S]*?\*\/)/gm, '<span class="comment">$1</span>')
                        .replace(/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g, '<span class="function">$1</span>(')
                        .replace(/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\s*:/g, '<span class="variable">$1</span>:');
                    
                    return `<div class="code-line"><span class="line-number">${lineNum}</span>${highlightedLine}</div>`;
                })
                .join('');
        }

        function copyURL() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                showStatus('URL copied to clipboard! üìã', 'success');
            }).catch(() => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = url;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showStatus('URL copied to clipboard! üìã', 'success');
            });
        }

        function showStatus(message, type = 'success') {
            const status = document.getElementById('buildStatus');
            const statusText = document.getElementById('statusText');
            
            status.className = `status ${type}`;
            statusText.textContent = message;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }

        function addToLog(message) {
            const log = document.getElementById('buildLog');
            const content = document.getElementById('logContent');
            
            log.style.display = 'block';
            content.innerHTML += `[${new Date().toLocaleTimeString()}] ${message}<br>`;
            content.scrollTop = content.scrollHeight;
        }

        async function runBuild(type) {
            showStatus('Starting build...', 'warning');
            addToLog(`Starting ${type} build...`);

            try {
                if (type === 'typescript' || type === 'both') {
                    addToLog('Running TypeScript compilation...');
                    // Simulate build process (in real deployment, this would call actual API)
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    addToLog('‚úÖ TypeScript compilation completed');
                }

                if (type === 'server' || type === 'both') {
                    addToLog('Starting Node.js server...');
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    addToLog('‚úÖ Server started on port 3000');
                }

                showStatus(`‚úÖ ${type} build completed successfully!`, 'success');
                addToLog(`üéâ ${type} build process finished`);

            } catch (error) {
                showStatus(`‚ùå Build failed: ${error.message}`, 'error');
                addToLog(`‚ùå Error: ${error.message}`);
            }
        }

        function openApp() {
            showStatus('Opening PixelProdigy Studio...', 'success');
            // Check if we're on mobile
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                addToLog('Mobile detected - optimizing for touch controls');
            }
            
            window.open('pixelprodigy3d.html', '_blank');
        }

        // Initialize
        window.addEventListener('load', () => {
            showStatus('Mobile Guru Platform ready! üöÄ', 'success');
            addToLog('ü¶ï Revolutionary QR system initialized');
            addToLog('üéØ Hover zones activated for environment transitions');
            addToLog('üíª GURU CODING MODE ready');
            
            // Add current URL info
            addToLog(`Current URL: ${window.location.href}`);
            
            // Detect device
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            addToLog(`Device type: ${isMobile ? 'Mobile/Tablet üì±' : 'Desktop üñ•Ô∏è'}`);
            
            // Initialize QR mode
            setQRMode('animated');
        });

        // Enhanced dinosaur interaction
        document.addEventListener('DOMContentLoaded', () => {
            const dinosaur = document.getElementById('dinosaur');
            if (dinosaur) {
                dinosaur.addEventListener('click', () => {
                    if (currentQRMode === 'animated') {
                        dinosaur.style.transform = 'scale(2) rotate(720deg)';
                        dinosaur.textContent = 'ü¶ñ'; // T-Rex mode!
                        setTimeout(() => {
                            dinosaur.style.transform = '';
                            dinosaur.textContent = 'ü¶ï';
                        }, 1000);
                        showStatus('ü¶ñ MEGA ROAR! T-Rex mode activated!', 'success');
                        addToLog('ü¶ñ Dinosaur evolved into T-Rex temporarily!');
                    } else {
                        showStatus('ü¶ï Static mode - dinosaur is professional!', 'success');
                    }
                });
            }
        });

        // Add particle effects for hover zones
        function createParticleEffect(x, y) {
            for (let i = 0; i < 5; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: fixed;
                    left: ${x}px;
                    top: ${y}px;
                    width: 4px;
                    height: 4px;
                    background: #00ff88;
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 9999;
                    animation: particleFloat 1s ease-out forwards;
                `;
                document.body.appendChild(particle);
                
                setTimeout(() => particle.remove(), 1000);
            }
        }

        // Add particle animation CSS
        const particleCSS = document.createElement('style');
        particleCSS.textContent = `
            @keyframes particleFloat {
                0% {
                    transform: translate(0, 0) scale(1);
                    opacity: 1;
                }
                100% {
                    transform: translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px) scale(0);
                    opacity: 0;
                }
            }
            
            @keyframes fadeIn {
                from { opacity: 0; transform: scale(0.9); }
                to { opacity: 1; transform: scale(1); }
            }
            
            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.05); }
            }
        `;
        document.head.appendChild(particleCSS);

        // Add hover effects to environment zones
        document.addEventListener('DOMContentLoaded', () => {
            const hoverZones = document.querySelectorAll('.hover-zone');
            hoverZones.forEach(zone => {
                zone.addEventListener('mouseenter', (e) => {
                    createParticleEffect(e.clientX, e.clientY);
                });
                
                zone.addEventListener('click', (e) => {
                    createParticleEffect(e.clientX, e.clientY);
                });
            });
        });
    </script>
</body>
</html>